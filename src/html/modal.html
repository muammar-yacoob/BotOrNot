<div class="modal-content">
  <div class="modal-header">
    <h3>🔎 Bot or Not? Analysis</h3>
    <button class="btn-close" id="close-btn">&times;</button>
  </div>
  
  <div class="modal-body">
    <!-- Main Result Card -->
    <div class="card card-result" id="result-card">
      <div class="text-primary" id="result-text"></div>
      <div class="text-secondary" id="tool-text" style="display: none;">🛠️ <span id="tool-name"></span></div>
      <div class="text-dim">Method: <span id="method-text"></span></div>
    </div>

    <!-- Signatures Section -->
    <details id="signatures-details">
      <summary>🔍 Found Signatures (<span id="signature-count">0</span>)</summary>
      <div class="content" id="signatures-content">
        <div class="list" id="signatures-list"></div>
      </div>
    </details>

    <!-- Summary Section -->
    <div class="card">
      <h4 class="text-primary">📊 Analysis Summary</h4>
      <div class="metrics" id="summary-metrics"></div>
    </div>

    <!-- Filters Section -->
    <details id="filters-details">
      <summary>🎨 Filter Analysis</summary>
      <div class="content" id="filters-content">
        <div class="list" id="filters-list"></div>
      </div>
    </details>
    
    <!-- Image Preview -->
    <div class="image-preview">
      <img id="analyzed-image" alt="Analyzed media">
    </div>
    
    <!-- Technical Details -->
    <details id="details-details">
      <summary>📋 Technical Details</summary>
      <div class="content scrollable" id="details-content">
        <ul id="details-list"></ul>
      </div>
    </details>
  </div>
  
  <div class="modal-footer">
    <button class="btn" id="copy-btn">Copy & Close</button>
  </div>
</div>

<script>
// Forward control - modal.html calls modal.js to get data
function initializeModal() {
    console.log('Modal initialization started');
    
    // Get the source URL from the modal data attribute
    const modal = document.querySelector('[data-bot-or-not-modal]');
    const srcUrl = modal?.dataset.srcUrl;
    
    console.log('Modal found:', modal);
    console.log('Source URL:', srcUrl);
    
    if (!srcUrl) {
        console.error('No source URL found for modal');
        document.getElementById('result-text').textContent = '❌ No source URL';
        return;
    }
    
    // Show loading state
    document.getElementById('result-text').textContent = '🔄 Analyzing...';
    console.log('Loading state set');
    
    // Check if BotOrNotModal is available
    if (!window.BotOrNotModal) {
        console.error('BotOrNotModal not available');
        document.getElementById('result-text').textContent = '❌ Modal controller not loaded';
        return;
    }
    
    console.log('BotOrNotModal available, starting analysis...');
    
    // Call modal.js to perform analysis and populate data
    window.BotOrNotModal.initialize(srcUrl, 'image')
        .then(() => {
            console.log('Modal analysis completed successfully');
        })
        .catch(error => {
            console.error('Modal initialization failed:', error);
            document.getElementById('result-text').textContent = '❌ Analysis Failed: ' + error.message;
        });
}

// Modal initialization is now handled by content.js directly
// This script is disabled to prevent conflicts
console.log('Modal HTML loaded - initialization handled by content.js');
</script>